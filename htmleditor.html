<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>demo实例代码</title>
    
    <!-- Latest jQuery from Google CDN -->
    <script src="https://cdn.staticfile.org/jquery/2.1.3/jquery.min.js"></script>
    <!-- Crypto JS -->
    <script src="https://cdn.staticfile.org/crypto-js/3.1.9-1/crypto-js.min.js"></script>
    <script src="https://cdn.staticfile.org/crypto-js/3.1.9-1/aes.min.js"></script>
    <!-- Beautify Web - HTML, CSS, JS -->
    <script src="js/beautify-web/beautify-html.js"></script>
    <script src="js/beautify-web/beautify-css.js"></script>
    <script src="js/beautify-web/beautify.js"></script>
    <!-- Ace Editor -->
    <script src="js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>

    <!-- JSTinker Scripts -->
    <script src="js/jstinker.js"></script>
    <!-- Bootstrap Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <!-- Bootstrap Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <!-- JSTinker Style -->
    <link rel="stylesheet" href="css/jstinker.css" type="text/css">
    <link rel="stylesheet" href="css/w3.css" type="text/css">
    <!-- Bootstrap Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    
    <script src="./js/av-min-3.15.0.js"></script>
    <script src="./js/table.js"></script>    
</head>
<body>


    <!-- Sidebar -->
         <nav class="navbar navbar-default">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#toolbar">
                <span class="sr-only">Toggle toolbar</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span>Nami</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="toolbar">
            <ul class="nav navbar-nav">
                <li id="btnSidebar" class="w3-hide-large"> <a href=""><span class="glyphicon glyphicon-option" aria-hidden="true"></span>Sidebar</a></li>
                <li id="btnRun2"><a href=""><span class="glyphicon glyphicon-play" aria-hidden="true"></span> 运行</a></li>
                <li id="btnTidyUp"><a href=""><span class="glyphicon glyphicon-flash" aria-hidden="true"></span>代码对齐</a></li>
  
            </ul>
        </div><!-- /.navbar-collapse -->
    </nav>
    <div class='2editorsContainer'>
    <div class="row">
        <div class="col-sm-6">
            <!-- HTML Editor -->
            <div class="editorContainer" style="position: relative;">
                <div class="halfeditor" id="html-editor"></div>
                <h1 class='bgmark'>HTML</h1>
            </div>
        </div>
        <div class="col-sm-6">
            <!-- Preview -->
            <div class="editorContainer">
                <iframe class="halfeditor" id="preview" name="result" sandbox="allow-forms allow-popups allow-scripts allow-same-origin" frameborder="0">
                    #document
                </iframe>
            </div>
        </div>
    </div>

    </div>
    <!-- Set Editor Modes -->
    <script>
    let cid = getParameter('cid');
    
  initialize('hqD9IMTNsFSk2LxbiFnBEvCp-gzGzoHsz','ITs4Ni1EiEI5sEcQQ4CBJqpb');
  const CODES = "codes";  
    
        ace.require("ace/ext/language_tools");

        var htmlEditor = ace.edit("html-editor");
        htmlEditor.setTheme("ace/theme/crimson_editor");
        htmlEditor.getSession().setMode("ace/mode/html");
        htmlEditor.setOptions({
            enableBasicAutocompletion: true
        });
         var htmlvalue="";
         if(cid.length > 0)
         {
         
        findItemById(CODES, cid, 
            function(table, result)
            {         
              htmlEditor.setValue(result.get("code"));
              $("#btnRun2").click();
            },
            function(table, obj,error)
            {
            alert("发生错误：" + error.message);
            });
        };
   // RUN Button
    $("#btnRun2").click(function(event) {  
        event.preventDefault();
        
        var previewDoc = window.frames[0].document;
        

        var html   = ace.edit("html-editor").getSession().getValue();

        previewDoc.write(html);
        previewDoc.close();
    });
    
    </script>
    
</body>
</html>
